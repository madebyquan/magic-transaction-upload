"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/upload/route";
exports.ids = ["app/api/upload/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "xlsx":
/*!***********************!*\
  !*** external "xlsx" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("xlsx");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "worker_threads":
/*!*********************************!*\
  !*** external "worker_threads" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("worker_threads");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "node:fs":
/*!**************************!*\
  !*** external "node:fs" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("node:fs");

/***/ }),

/***/ "node:stream":
/*!******************************!*\
  !*** external "node:stream" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:stream");

/***/ }),

/***/ "node:stream/web":
/*!**********************************!*\
  !*** external "node:stream/web" ***!
  \**********************************/
/***/ ((module) => {

module.exports = require("node:stream/web");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fupload%2Froute&page=%2Fapi%2Fupload%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fupload%2Froute.ts&appDir=%2FUsers%2Fquando%2FDocuments%2FData%20parsing%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fquando%2FDocuments%2FData%20parsing&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fupload%2Froute&page=%2Fapi%2Fupload%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fupload%2Froute.ts&appDir=%2FUsers%2Fquando%2FDocuments%2FData%20parsing%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fquando%2FDocuments%2FData%20parsing&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_quando_Documents_Data_parsing_src_app_api_upload_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/upload/route.ts */ \"(rsc)/./src/app/api/upload/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/upload/route\",\n        pathname: \"/api/upload\",\n        filename: \"route\",\n        bundlePath: \"app/api/upload/route\"\n    },\n    resolvedPagePath: \"/Users/quando/Documents/Data parsing/src/app/api/upload/route.ts\",\n    nextConfigOutput,\n    userland: _Users_quando_Documents_Data_parsing_src_app_api_upload_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/upload/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZ1cGxvYWQlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRnVwbG9hZCUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRnVwbG9hZCUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRnF1YW5kbyUyRkRvY3VtZW50cyUyRkRhdGElMjBwYXJzaW5nJTJGc3JjJTJGYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj0lMkZVc2VycyUyRnF1YW5kbyUyRkRvY3VtZW50cyUyRkRhdGElMjBwYXJzaW5nJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUNnQjtBQUM3RjtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL3RyYW5zYWN0aW9uLXVwbG9hZC8/Yjg2ZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIvVXNlcnMvcXVhbmRvL0RvY3VtZW50cy9EYXRhIHBhcnNpbmcvc3JjL2FwcC9hcGkvdXBsb2FkL3JvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS91cGxvYWQvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS91cGxvYWRcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL3VwbG9hZC9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIi9Vc2Vycy9xdWFuZG8vRG9jdW1lbnRzL0RhdGEgcGFyc2luZy9zcmMvYXBwL2FwaS91cGxvYWQvcm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL3VwbG9hZC9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fupload%2Froute&page=%2Fapi%2Fupload%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fupload%2Froute.ts&appDir=%2FUsers%2Fquando%2FDocuments%2FData%20parsing%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fquando%2FDocuments%2FData%20parsing&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/upload/route.ts":
/*!*************************************!*\
  !*** ./src/app/api/upload/route.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_openai__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/openai */ \"(rsc)/./src/lib/openai.ts\");\n/* harmony import */ var xlsx__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! xlsx */ \"xlsx\");\n/* harmony import */ var xlsx__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(xlsx__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var openai__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! openai */ \"(rsc)/./node_modules/openai/index.mjs\");\n\n\n\n\nconst openai = new openai__WEBPACK_IMPORTED_MODULE_3__[\"default\"]({\n    apiKey: process.env.OPENAI_API_KEY\n});\nasync function POST(request) {\n    try {\n        const formData = await request.formData();\n        const file = formData.get(\"file\");\n        if (!file) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: \"No file received\"\n            }, {\n                status: 400\n            });\n        }\n        // Determine file type and optimize processing\n        let data = [];\n        if (file.type.startsWith(\"image/\")) {\n            const buffer = await file.arrayBuffer();\n            const base64 = Buffer.from(buffer).toString(\"base64\");\n            // Optimize Vision API request\n            const response = await openai.chat.completions.create({\n                model: \"gpt-4o\",\n                messages: [\n                    {\n                        role: \"user\",\n                        content: [\n                            {\n                                type: \"text\",\n                                text: \"Extract only the following from this image: stock ticker, number of shares, price, date, and transaction type (buy/sell). Format as JSON array.\"\n                            },\n                            {\n                                type: \"image_url\",\n                                image_url: {\n                                    url: `data:${file.type};base64,${base64}`,\n                                    detail: \"low\" // Use low detail for faster processing\n                                }\n                            }\n                        ]\n                    }\n                ],\n                temperature: 0,\n                max_tokens: 500,\n                response_format: {\n                    type: \"json_object\"\n                } // Force JSON response\n            });\n            const text = response.choices[0].message.content;\n            if (text) {\n                const result = await (0,_lib_openai__WEBPACK_IMPORTED_MODULE_1__.extractDataFromText)(text);\n                if (result?.data) {\n                    data = result.data;\n                }\n            }\n        } else if (file.type === \"text/csv\" || file.type.includes(\"sheet\")) {\n            // Optimize CSV/Excel processing\n            let text = \"\";\n            if (file.type === \"text/csv\") {\n                text = await file.text();\n            } else {\n                // For Excel, read only first 100 rows\n                const buffer = await file.arrayBuffer();\n                const workbook = xlsx__WEBPACK_IMPORTED_MODULE_2__.read(buffer, {\n                    sheetRows: 100\n                });\n                const firstSheet = workbook.Sheets[workbook.SheetNames[0]];\n                text = xlsx__WEBPACK_IMPORTED_MODULE_2__.utils.sheet_to_csv(firstSheet);\n            }\n            // Process in smaller chunks if text is large\n            if (text.length > 5000) {\n                const lines = text.split(\"\\n\");\n                const header = lines[0];\n                const chunks = lines.slice(1).reduce((acc, line, i)=>{\n                    const chunkIndex = Math.floor(i / 20);\n                    if (!acc[chunkIndex]) acc[chunkIndex] = [];\n                    acc[chunkIndex].push(line);\n                    return acc;\n                }, []);\n                // Process chunks in parallel\n                const results = await Promise.all(chunks.map((chunk)=>(0,_lib_openai__WEBPACK_IMPORTED_MODULE_1__.extractDataFromText)([\n                        header,\n                        ...chunk\n                    ].join(\"\\n\"))));\n                data = results.flatMap((result)=>result?.data || []);\n            } else {\n                const result = await (0,_lib_openai__WEBPACK_IMPORTED_MODULE_1__.extractDataFromText)(text);\n                if (result?.data) {\n                    data = result.data;\n                }\n            }\n        } else {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: \"Unsupported file type\"\n            }, {\n                status: 400\n            });\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            data\n        });\n    } catch (error) {\n        console.error(\"Error processing file:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: error.message\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RyxXQUFXLEdBQUcsRUFBRTtvQkFDMUNILEdBQUcsQ0FBQ0csV0FBVyxDQUFDRyxJQUFJLENBQUNMO29CQUNyQixPQUFPRDtnQkFDVCxHQUFHLEVBQUU7Z0JBRUwsNkJBQTZCO2dCQUM3QixNQUFNTyxVQUFVLE1BQU1DLFFBQVFDLEdBQUcsQ0FDL0JaLE9BQU9hLEdBQUcsQ0FBQ0MsQ0FBQUEsUUFDVHZFLGdFQUFtQkEsQ0FBQzt3QkFBQ3dEOzJCQUFXZTtxQkFBTSxDQUFDQyxJQUFJLENBQUM7Z0JBSWhEdkQsT0FBT2tELFFBQVFNLE9BQU8sQ0FBQzlCLENBQUFBLFNBQVVBLFFBQVExQixRQUFRLEVBQUU7WUFDckQsT0FBTztnQkFDTCxNQUFNMEIsU0FBUyxNQUFNM0MsZ0VBQW1CQSxDQUFDa0M7Z0JBQ3pDLElBQUlTLFFBQVExQixNQUFNO29CQUNoQkEsT0FBTzBCLE9BQU8xQixJQUFJO2dCQUNwQjtZQUNGO1FBQ0YsT0FDSztZQUNILE9BQU9sQixxREFBWUEsQ0FBQ2MsSUFBSSxDQUFDO2dCQUN2QkMsU0FBUztnQkFDVEMsT0FBTztZQUNULEdBQUc7Z0JBQUVDLFFBQVE7WUFBSTtRQUNuQjtRQUVBLE9BQU9qQixxREFBWUEsQ0FBQ2MsSUFBSSxDQUFDO1lBQ3ZCQyxTQUFTO1lBQ1RHO1FBQ0Y7SUFFRixFQUFFLE9BQU9GLE9BQVk7UUFDbkIyRCxRQUFRM0QsS0FBSyxDQUFDLDBCQUEwQkE7UUFDeEMsT0FBT2hCLHFEQUFZQSxDQUFDYyxJQUFJLENBQUM7WUFDdkJDLFNBQVM7WUFDVEMsT0FBT0EsTUFBTTJCLE9BQU87UUFDdEIsR0FBRztZQUFFMUIsUUFBUTtRQUFJO0lBQ25CO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90cmFuc2FjdGlvbi11cGxvYWQvLi9zcmMvYXBwL2FwaS91cGxvYWQvcm91dGUudHM/NTEyMiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcidcbmltcG9ydCB7IGV4dHJhY3REYXRhRnJvbVRleHQgfSBmcm9tICdAL2xpYi9vcGVuYWknXG5pbXBvcnQgKiBhcyBYTFNYIGZyb20gJ3hsc3gnXG5pbXBvcnQgT3BlbkFJIGZyb20gJ29wZW5haSdcblxuY29uc3Qgb3BlbmFpID0gbmV3IE9wZW5BSSh7XG4gIGFwaUtleTogcHJvY2Vzcy5lbnYuT1BFTkFJX0FQSV9LRVlcbn0pXG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcXVlc3Q6IFJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBmb3JtRGF0YSA9IGF3YWl0IHJlcXVlc3QuZm9ybURhdGEoKVxuICAgIGNvbnN0IGZpbGUgPSBmb3JtRGF0YS5nZXQoJ2ZpbGUnKSBhcyBGaWxlIHwgbnVsbFxuXG4gICAgaWYgKCFmaWxlKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBcbiAgICAgICAgc3VjY2VzczogZmFsc2UsIFxuICAgICAgICBlcnJvcjogJ05vIGZpbGUgcmVjZWl2ZWQnIFxuICAgICAgfSwgeyBzdGF0dXM6IDQwMCB9KVxuICAgIH1cblxuICAgIC8vIERldGVybWluZSBmaWxlIHR5cGUgYW5kIG9wdGltaXplIHByb2Nlc3NpbmdcbiAgICBsZXQgZGF0YSA9IFtdXG4gICAgXG4gICAgaWYgKGZpbGUudHlwZS5zdGFydHNXaXRoKCdpbWFnZS8nKSkge1xuICAgICAgY29uc3QgYnVmZmVyID0gYXdhaXQgZmlsZS5hcnJheUJ1ZmZlcigpXG4gICAgICBjb25zdCBiYXNlNjQgPSBCdWZmZXIuZnJvbShidWZmZXIpLnRvU3RyaW5nKCdiYXNlNjQnKVxuXG4gICAgICAvLyBPcHRpbWl6ZSBWaXNpb24gQVBJIHJlcXVlc3RcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgb3BlbmFpLmNoYXQuY29tcGxldGlvbnMuY3JlYXRlKHtcbiAgICAgICAgbW9kZWw6IFwiZ3B0LTRvXCIsXG4gICAgICAgIG1lc3NhZ2VzOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgcm9sZTogXCJ1c2VyXCIsXG4gICAgICAgICAgICBjb250ZW50OiBbXG4gICAgICAgICAgICAgIHsgXG4gICAgICAgICAgICAgICAgdHlwZTogXCJ0ZXh0XCIsIFxuICAgICAgICAgICAgICAgIHRleHQ6IFwiRXh0cmFjdCBvbmx5IHRoZSBmb2xsb3dpbmcgZnJvbSB0aGlzIGltYWdlOiBzdG9jayB0aWNrZXIsIG51bWJlciBvZiBzaGFyZXMsIHByaWNlLCBkYXRlLCBhbmQgdHJhbnNhY3Rpb24gdHlwZSAoYnV5L3NlbGwpLiBGb3JtYXQgYXMgSlNPTiBhcnJheS5cIiBcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgeyBcbiAgICAgICAgICAgICAgICB0eXBlOiBcImltYWdlX3VybFwiLCBcbiAgICAgICAgICAgICAgICBpbWFnZV91cmw6IHsgXG4gICAgICAgICAgICAgICAgICB1cmw6IGBkYXRhOiR7ZmlsZS50eXBlfTtiYXNlNjQsJHtiYXNlNjR9YCxcbiAgICAgICAgICAgICAgICAgIGRldGFpbDogXCJsb3dcIiAvLyBVc2UgbG93IGRldGFpbCBmb3IgZmFzdGVyIHByb2Nlc3NpbmdcbiAgICAgICAgICAgICAgICB9IFxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBdXG4gICAgICAgICAgfVxuICAgICAgICBdLFxuICAgICAgICB0ZW1wZXJhdHVyZTogMCwgLy8gTW9yZSBwcmVjaXNlIHJlc3BvbnNlc1xuICAgICAgICBtYXhfdG9rZW5zOiA1MDAsIC8vIExpbWl0IHJlc3BvbnNlIHNpemVcbiAgICAgICAgcmVzcG9uc2VfZm9ybWF0OiB7IHR5cGU6IFwianNvbl9vYmplY3RcIiB9IC8vIEZvcmNlIEpTT04gcmVzcG9uc2VcbiAgICAgIH0pXG5cbiAgICAgIGNvbnN0IHRleHQgPSByZXNwb25zZS5jaG9pY2VzWzBdLm1lc3NhZ2UuY29udGVudFxuICAgICAgaWYgKHRleHQpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZXh0cmFjdERhdGFGcm9tVGV4dCh0ZXh0KVxuICAgICAgICBpZiAocmVzdWx0Py5kYXRhKSB7XG4gICAgICAgICAgZGF0YSA9IHJlc3VsdC5kYXRhXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IFxuICAgIGVsc2UgaWYgKGZpbGUudHlwZSA9PT0gJ3RleHQvY3N2JyB8fCBmaWxlLnR5cGUuaW5jbHVkZXMoJ3NoZWV0JykpIHtcbiAgICAgIC8vIE9wdGltaXplIENTVi9FeGNlbCBwcm9jZXNzaW5nXG4gICAgICBsZXQgdGV4dCA9ICcnXG4gICAgICBcbiAgICAgIGlmIChmaWxlLnR5cGUgPT09ICd0ZXh0L2NzdicpIHtcbiAgICAgICAgdGV4dCA9IGF3YWl0IGZpbGUudGV4dCgpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBGb3IgRXhjZWwsIHJlYWQgb25seSBmaXJzdCAxMDAgcm93c1xuICAgICAgICBjb25zdCBidWZmZXIgPSBhd2FpdCBmaWxlLmFycmF5QnVmZmVyKClcbiAgICAgICAgY29uc3Qgd29ya2Jvb2sgPSBYTFNYLnJlYWQoYnVmZmVyLCB7IHNoZWV0Um93czogMTAwIH0pXG4gICAgICAgIGNvbnN0IGZpcnN0U2hlZXQgPSB3b3JrYm9vay5TaGVldHNbd29ya2Jvb2suU2hlZXROYW1lc1swXV1cbiAgICAgICAgdGV4dCA9IFhMU1gudXRpbHMuc2hlZXRfdG9fY3N2KGZpcnN0U2hlZXQpXG4gICAgICB9XG5cbiAgICAgIC8vIFByb2Nlc3MgaW4gc21hbGxlciBjaHVua3MgaWYgdGV4dCBpcyBsYXJnZVxuICAgICAgaWYgKHRleHQubGVuZ3RoID4gNTAwMCkge1xuICAgICAgICBjb25zdCBsaW5lcyA9IHRleHQuc3BsaXQoJ1xcbicpXG4gICAgICAgIGNvbnN0IGhlYWRlciA9IGxpbmVzWzBdXG4gICAgICAgIGNvbnN0IGNodW5rcyA9IGxpbmVzLnNsaWNlKDEpLnJlZHVjZSgoYWNjLCBsaW5lLCBpKSA9PiB7XG4gICAgICAgICAgY29uc3QgY2h1bmtJbmRleCA9IE1hdGguZmxvb3IoaSAvIDIwKVxuICAgICAgICAgIGlmICghYWNjW2NodW5rSW5kZXhdKSBhY2NbY2h1bmtJbmRleF0gPSBbXVxuICAgICAgICAgIGFjY1tjaHVua0luZGV4XS5wdXNoKGxpbmUpXG4gICAgICAgICAgcmV0dXJuIGFjY1xuICAgICAgICB9LCBbXSBhcyBzdHJpbmdbXVtdKVxuXG4gICAgICAgIC8vIFByb2Nlc3MgY2h1bmtzIGluIHBhcmFsbGVsXG4gICAgICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBQcm9taXNlLmFsbChcbiAgICAgICAgICBjaHVua3MubWFwKGNodW5rID0+IFxuICAgICAgICAgICAgZXh0cmFjdERhdGFGcm9tVGV4dChbaGVhZGVyLCAuLi5jaHVua10uam9pbignXFxuJykpXG4gICAgICAgICAgKVxuICAgICAgICApXG5cbiAgICAgICAgZGF0YSA9IHJlc3VsdHMuZmxhdE1hcChyZXN1bHQgPT4gcmVzdWx0Py5kYXRhIHx8IFtdKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZXh0cmFjdERhdGFGcm9tVGV4dCh0ZXh0KVxuICAgICAgICBpZiAocmVzdWx0Py5kYXRhKSB7XG4gICAgICAgICAgZGF0YSA9IHJlc3VsdC5kYXRhXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBcbiAgICAgICAgc3VjY2VzczogZmFsc2UsIFxuICAgICAgICBlcnJvcjogJ1Vuc3VwcG9ydGVkIGZpbGUgdHlwZScgXG4gICAgICB9LCB7IHN0YXR1czogNDAwIH0pXG4gICAgfVxuXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgXG4gICAgICBzdWNjZXNzOiB0cnVlLCBcbiAgICAgIGRhdGEgXG4gICAgfSlcblxuICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgcHJvY2Vzc2luZyBmaWxlOicsIGVycm9yKVxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IFxuICAgICAgc3VjY2VzczogZmFsc2UsIFxuICAgICAgZXJyb3I6IGVycm9yLm1lc3NhZ2UgXG4gICAgfSwgeyBzdGF0dXM6IDUwMCB9KVxuICB9XG59Il0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsImV4dHJhY3REYXRhRnJvbVRleHQiLCJYTFNYIiwiT3BlbkFJIiwib3BlbmFpIiwiYXBpS2V5IiwicHJvY2VzcyIsImVudiIsIk9QRU5BSV9BUElfS0VZIiwiUE9TVCIsInJlcXVlc3QiLCJmb3JtRGF0YSIsImZpbGUiLCJnZXQiLCJqc29uIiwic3VjY2VzcyIsImVycm9yIiwic3RhdHVzIiwiZGF0YSIsInR5cGUiLCJzdGFydHNXaXRoIiwiYnVmZmVyIiwiYXJyYXlCdWZmZXIiLCJiYXNlNjQiLCJCdWZmZXIiLCJmcm9tIiwidG9TdHJpbmciLCJyZXNwb25zZSIsImNoYXQiLCJjb21wbGV0aW9ucyIsImNyZWF0ZSIsIm1vZGVsIiwibWVzc2FnZXMiLCJyb2xlIiwiY29udGVudCIsInRleHQiLCJpbWFnZV91cmwiLCJ1cmwiLCJkZXRhaWwiLCJ0ZW1wZXJhdHVyZSIsIm1heF90b2tlbnMiLCJyZXNwb25zZV9mb3JtYXQiLCJjaG9pY2VzIiwibWVzc2FnZSIsInJlc3VsdCIsImluY2x1ZGVzIiwid29ya2Jvb2siLCJyZWFkIiwic2hlZXRSb3dzIiwiZmlyc3RTaGVldCIsIlNoZWV0cyIsIlNoZWV0TmFtZXMiLCJ1dGlscyIsInNoZWV0X3RvX2NzdiIsImxlbmd0aCIsImxpbmVzIiwic3BsaXQiLCJoZWFkZXIiLCJjaHVua3MiLCJzbGljZSIsInJlZHVjZSIsImFjYyIsImxpbmUiLCJpIiwiY2h1bmtJbmRleCIsIk1hdGgiLCJmbG9vciIsInB1c2giLCJyZXN1bHRzIiwiUHJvbWlzZSIsImFsbCIsIm1hcCIsImNodW5rIiwiam9pbiIsImZsYXRNYXAiLCJjb25zb2xlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/upload/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/openai.ts":
/*!***************************!*\
  !*** ./src/lib/openai.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   extractDataFromText: () => (/* binding */ extractDataFromText)\n/* harmony export */ });\n/* harmony import */ var openai__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! openai */ \"(rsc)/./node_modules/openai/index.mjs\");\n\nconst openai = new openai__WEBPACK_IMPORTED_MODULE_0__[\"default\"]({\n    apiKey: process.env.OPENAI_API_KEY\n});\n// Get current date in local timezone at the start\nconst today = new Date();\nconst currentDate = today.getFullYear() + \"-\" + String(today.getMonth() + 1).padStart(2, \"0\") + \"-\" + String(today.getDate()).padStart(2, \"0\");\nasync function extractDataFromText(text) {\n    try {\n        console.log(\"Input text for processing:\", text);\n        if (!text.trim()) {\n            return {\n                data: []\n            };\n        }\n        const response = await openai.chat.completions.create({\n            model: \"gpt-4\",\n            messages: [\n                {\n                    role: \"system\",\n                    content: `You are a financial data extractor. Extract transaction data from the following text and return it in a specific JSON format.\n          \n          Rules for extraction:\n          1. If only shares and price are found, assume:\n             - Transaction type is \"Initial balance\"\n             - Date is ${currentDate} (today)\n             - Stock ticker should be extracted or marked as \"UNKNOWN\"\n          \n          2. Numbers without units should be interpreted as:\n             - Whole numbers are typically shares\n             - Decimal numbers are typically prices\n          \n          3. Format all data as:\n          {\n            \"data\": [\n              {\n                \"stockTicker\": \"string (stock symbol or 'UNKNOWN')\",\n                \"numberOfShares\": \"number (quantity)\",\n                \"purchasePrice\": \"number (price per share)\",\n                \"purchaseDate\": \"string (use ${currentDate} if not found)\",\n                \"transactionType\": \"string (use 'Initial balance' if only shares and price found, otherwise 'buy' or 'sell')\"\n              }\n            ]\n          }\n          \n          If you find any numbers, try to create a transaction record with defaults.\n          Do not include any other text or explanation in your response.`\n                },\n                {\n                    role: \"user\",\n                    content: text\n                }\n            ],\n            temperature: 0\n        });\n        const content = response.choices[0].message.content;\n        console.log(\"OpenAI Response:\", content);\n        if (!content) {\n            return {\n                data: []\n            };\n        }\n        try {\n            const parsedData = JSON.parse(content.trim());\n            // Validate and set defaults for each transaction\n            if (parsedData.data && Array.isArray(parsedData.data)) {\n                parsedData.data = parsedData.data.map((transaction)=>({\n                        stockTicker: transaction.stockTicker || \"UNKNOWN\",\n                        numberOfShares: Number(transaction.numberOfShares) || 0,\n                        purchasePrice: Number(transaction.purchasePrice) || 0,\n                        purchaseDate: transaction.purchaseDate || currentDate,\n                        transactionType: transaction.transactionType || \"Initial balance\"\n                    }));\n                // Filter out invalid transactions\n                parsedData.data = parsedData.data.filter((transaction)=>transaction.numberOfShares > 0 && transaction.purchasePrice > 0);\n            }\n            return parsedData;\n        } catch (parseError) {\n            console.error(\"JSON Parse Error:\", {\n                error: parseError,\n                content: content\n            });\n            return {\n                data: []\n            };\n        }\n    } catch (error) {\n        console.error(\"OpenAI Processing Error:\", {\n            error: error.message,\n            response: error.response?.data,\n            status: error.response?.status,\n            text: text\n        });\n        if (error.response?.status === 429) {\n            throw new Error(\"Rate limit exceeded. Please try again later.\");\n        }\n        throw new Error(error.response?.data?.error?.message || error.message || \"Failed to process text with OpenAI\");\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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O0lBRUo7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3RyYW5zYWN0aW9uLXVwbG9hZC8uL3NyYy9saWIvb3BlbmFpLnRzP2E1YzUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IE9wZW5BSSBmcm9tICdvcGVuYWknXG5cbmNvbnN0IG9wZW5haSA9IG5ldyBPcGVuQUkoe1xuICBhcGlLZXk6IHByb2Nlc3MuZW52Lk9QRU5BSV9BUElfS0VZLFxufSlcblxuaW50ZXJmYWNlIFRyYW5zYWN0aW9uIHtcbiAgc3RvY2tUaWNrZXI6IHN0cmluZ1xuICBudW1iZXJPZlNoYXJlczogbnVtYmVyXG4gIHB1cmNoYXNlUHJpY2U6IG51bWJlclxuICBwdXJjaGFzZURhdGU6IHN0cmluZ1xuICB0cmFuc2FjdGlvblR5cGU6IHN0cmluZ1xufVxuXG4vLyBHZXQgY3VycmVudCBkYXRlIGluIGxvY2FsIHRpbWV6b25lIGF0IHRoZSBzdGFydFxuY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpXG5jb25zdCBjdXJyZW50RGF0ZSA9IHRvZGF5LmdldEZ1bGxZZWFyKCkgKyAnLScgKyBcbiAgU3RyaW5nKHRvZGF5LmdldE1vbnRoKCkgKyAxKS5wYWRTdGFydCgyLCAnMCcpICsgJy0nICsgXG4gIFN0cmluZyh0b2RheS5nZXREYXRlKCkpLnBhZFN0YXJ0KDIsICcwJylcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGV4dHJhY3REYXRhRnJvbVRleHQodGV4dDogc3RyaW5nKTogUHJvbWlzZTxhbnk+IHtcbiAgdHJ5IHtcbiAgICBjb25zb2xlLmxvZygnSW5wdXQgdGV4dCBmb3IgcHJvY2Vzc2luZzonLCB0ZXh0KVxuXG4gICAgaWYgKCF0ZXh0LnRyaW0oKSkge1xuICAgICAgcmV0dXJuIHsgZGF0YTogW10gfVxuICAgIH1cblxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgb3BlbmFpLmNoYXQuY29tcGxldGlvbnMuY3JlYXRlKHtcbiAgICAgIG1vZGVsOiBcImdwdC00XCIsXG4gICAgICBtZXNzYWdlczogW1xuICAgICAgICB7XG4gICAgICAgICAgcm9sZTogXCJzeXN0ZW1cIixcbiAgICAgICAgICBjb250ZW50OiBgWW91IGFyZSBhIGZpbmFuY2lhbCBkYXRhIGV4dHJhY3Rvci4gRXh0cmFjdCB0cmFuc2FjdGlvbiBkYXRhIGZyb20gdGhlIGZvbGxvd2luZyB0ZXh0IGFuZCByZXR1cm4gaXQgaW4gYSBzcGVjaWZpYyBKU09OIGZvcm1hdC5cbiAgICAgICAgICBcbiAgICAgICAgICBSdWxlcyBmb3IgZXh0cmFjdGlvbjpcbiAgICAgICAgICAxLiBJZiBvbmx5IHNoYXJlcyBhbmQgcHJpY2UgYXJlIGZvdW5kLCBhc3N1bWU6XG4gICAgICAgICAgICAgLSBUcmFuc2FjdGlvbiB0eXBlIGlzIFwiSW5pdGlhbCBiYWxhbmNlXCJcbiAgICAgICAgICAgICAtIERhdGUgaXMgJHtjdXJyZW50RGF0ZX0gKHRvZGF5KVxuICAgICAgICAgICAgIC0gU3RvY2sgdGlja2VyIHNob3VsZCBiZSBleHRyYWN0ZWQgb3IgbWFya2VkIGFzIFwiVU5LTk9XTlwiXG4gICAgICAgICAgXG4gICAgICAgICAgMi4gTnVtYmVycyB3aXRob3V0IHVuaXRzIHNob3VsZCBiZSBpbnRlcnByZXRlZCBhczpcbiAgICAgICAgICAgICAtIFdob2xlIG51bWJlcnMgYXJlIHR5cGljYWxseSBzaGFyZXNcbiAgICAgICAgICAgICAtIERlY2ltYWwgbnVtYmVycyBhcmUgdHlwaWNhbGx5IHByaWNlc1xuICAgICAgICAgIFxuICAgICAgICAgIDMuIEZvcm1hdCBhbGwgZGF0YSBhczpcbiAgICAgICAgICB7XG4gICAgICAgICAgICBcImRhdGFcIjogW1xuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgXCJzdG9ja1RpY2tlclwiOiBcInN0cmluZyAoc3RvY2sgc3ltYm9sIG9yICdVTktOT1dOJylcIixcbiAgICAgICAgICAgICAgICBcIm51bWJlck9mU2hhcmVzXCI6IFwibnVtYmVyIChxdWFudGl0eSlcIixcbiAgICAgICAgICAgICAgICBcInB1cmNoYXNlUHJpY2VcIjogXCJudW1iZXIgKHByaWNlIHBlciBzaGFyZSlcIixcbiAgICAgICAgICAgICAgICBcInB1cmNoYXNlRGF0ZVwiOiBcInN0cmluZyAodXNlICR7Y3VycmVudERhdGV9IGlmIG5vdCBmb3VuZClcIixcbiAgICAgICAgICAgICAgICBcInRyYW5zYWN0aW9uVHlwZVwiOiBcInN0cmluZyAodXNlICdJbml0aWFsIGJhbGFuY2UnIGlmIG9ubHkgc2hhcmVzIGFuZCBwcmljZSBmb3VuZCwgb3RoZXJ3aXNlICdidXknIG9yICdzZWxsJylcIlxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBdXG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIElmIHlvdSBmaW5kIGFueSBudW1iZXJzLCB0cnkgdG8gY3JlYXRlIGEgdHJhbnNhY3Rpb24gcmVjb3JkIHdpdGggZGVmYXVsdHMuXG4gICAgICAgICAgRG8gbm90IGluY2x1ZGUgYW55IG90aGVyIHRleHQgb3IgZXhwbGFuYXRpb24gaW4geW91ciByZXNwb25zZS5gXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICByb2xlOiBcInVzZXJcIixcbiAgICAgICAgICBjb250ZW50OiB0ZXh0XG4gICAgICAgIH1cbiAgICAgIF0sXG4gICAgICB0ZW1wZXJhdHVyZTogMFxuICAgIH0pXG5cbiAgICBjb25zdCBjb250ZW50ID0gcmVzcG9uc2UuY2hvaWNlc1swXS5tZXNzYWdlLmNvbnRlbnRcbiAgICBjb25zb2xlLmxvZygnT3BlbkFJIFJlc3BvbnNlOicsIGNvbnRlbnQpXG5cbiAgICBpZiAoIWNvbnRlbnQpIHtcbiAgICAgIHJldHVybiB7IGRhdGE6IFtdIH1cbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgcGFyc2VkRGF0YSA9IEpTT04ucGFyc2UoY29udGVudC50cmltKCkpXG4gICAgICBcbiAgICAgIC8vIFZhbGlkYXRlIGFuZCBzZXQgZGVmYXVsdHMgZm9yIGVhY2ggdHJhbnNhY3Rpb25cbiAgICAgIGlmIChwYXJzZWREYXRhLmRhdGEgJiYgQXJyYXkuaXNBcnJheShwYXJzZWREYXRhLmRhdGEpKSB7XG4gICAgICAgIHBhcnNlZERhdGEuZGF0YSA9IHBhcnNlZERhdGEuZGF0YS5tYXAoKHRyYW5zYWN0aW9uOiBQYXJ0aWFsPFRyYW5zYWN0aW9uPikgPT4gKHtcbiAgICAgICAgICBzdG9ja1RpY2tlcjogdHJhbnNhY3Rpb24uc3RvY2tUaWNrZXIgfHwgJ1VOS05PV04nLFxuICAgICAgICAgIG51bWJlck9mU2hhcmVzOiBOdW1iZXIodHJhbnNhY3Rpb24ubnVtYmVyT2ZTaGFyZXMpIHx8IDAsXG4gICAgICAgICAgcHVyY2hhc2VQcmljZTogTnVtYmVyKHRyYW5zYWN0aW9uLnB1cmNoYXNlUHJpY2UpIHx8IDAsXG4gICAgICAgICAgcHVyY2hhc2VEYXRlOiB0cmFuc2FjdGlvbi5wdXJjaGFzZURhdGUgfHwgY3VycmVudERhdGUsXG4gICAgICAgICAgdHJhbnNhY3Rpb25UeXBlOiB0cmFuc2FjdGlvbi50cmFuc2FjdGlvblR5cGUgfHwgJ0luaXRpYWwgYmFsYW5jZSdcbiAgICAgICAgfSkpXG5cbiAgICAgICAgLy8gRmlsdGVyIG91dCBpbnZhbGlkIHRyYW5zYWN0aW9uc1xuICAgICAgICBwYXJzZWREYXRhLmRhdGEgPSBwYXJzZWREYXRhLmRhdGEuZmlsdGVyKCh0cmFuc2FjdGlvbjogVHJhbnNhY3Rpb24pID0+IFxuICAgICAgICAgIHRyYW5zYWN0aW9uLm51bWJlck9mU2hhcmVzID4gMCAmJiBcbiAgICAgICAgICB0cmFuc2FjdGlvbi5wdXJjaGFzZVByaWNlID4gMFxuICAgICAgICApXG4gICAgICB9XG5cbiAgICAgIHJldHVybiBwYXJzZWREYXRhXG5cbiAgICB9IGNhdGNoIChwYXJzZUVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdKU09OIFBhcnNlIEVycm9yOicsIHtcbiAgICAgICAgZXJyb3I6IHBhcnNlRXJyb3IsXG4gICAgICAgIGNvbnRlbnQ6IGNvbnRlbnRcbiAgICAgIH0pXG4gICAgICByZXR1cm4geyBkYXRhOiBbXSB9XG4gICAgfVxuXG4gIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICBjb25zb2xlLmVycm9yKCdPcGVuQUkgUHJvY2Vzc2luZyBFcnJvcjonLCB7XG4gICAgICBlcnJvcjogZXJyb3IubWVzc2FnZSxcbiAgICAgIHJlc3BvbnNlOiBlcnJvci5yZXNwb25zZT8uZGF0YSxcbiAgICAgIHN0YXR1czogZXJyb3IucmVzcG9uc2U/LnN0YXR1cyxcbiAgICAgIHRleHQ6IHRleHRcbiAgICB9KVxuICAgIFxuICAgIGlmIChlcnJvci5yZXNwb25zZT8uc3RhdHVzID09PSA0MjkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignUmF0ZSBsaW1pdCBleGNlZWRlZC4gUGxlYXNlIHRyeSBhZ2FpbiBsYXRlci4nKVxuICAgIH1cbiAgICBcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBlcnJvci5yZXNwb25zZT8uZGF0YT8uZXJyb3I/Lm1lc3NhZ2UgfHwgXG4gICAgICBlcnJvci5tZXNzYWdlIHx8IFxuICAgICAgJ0ZhaWxlZCB0byBwcm9jZXNzIHRleHQgd2l0aCBPcGVuQUknXG4gICAgKVxuICB9XG59Il0sIm5hbWVzIjpbIk9wZW5BSSIsIm9wZW5haSIsImFwaUtleSIsInByb2Nlc3MiLCJlbnYiLCJPUEVOQUlfQVBJX0tFWSIsInRvZGF5IiwiRGF0ZSIsImN1cnJlbnREYXRlIiwiZ2V0RnVsbFllYXIiLCJTdHJpbmciLCJnZXRNb250aCIsInBhZFN0YXJ0IiwiZ2V0RGF0ZSIsImV4dHJhY3REYXRhRnJvbVRleHQiLCJ0ZXh0IiwiY29uc29sZSIsImxvZyIsInRyaW0iLCJkYXRhIiwicmVzcG9uc2UiLCJjaGF0IiwiY29tcGxldGlvbnMiLCJjcmVhdGUiLCJtb2RlbCIsIm1lc3NhZ2VzIiwicm9sZSIsImNvbnRlbnQiLCJ0ZW1wZXJhdHVyZSIsImNob2ljZXMiLCJtZXNzYWdlIiwicGFyc2VkRGF0YSIsIkpTT04iLCJwYXJzZSIsIkFycmF5IiwiaXNBcnJheSIsIm1hcCIsInRyYW5zYWN0aW9uIiwic3RvY2tUaWNrZXIiLCJudW1iZXJPZlNoYXJlcyIsIk51bWJlciIsInB1cmNoYXNlUHJpY2UiLCJwdXJjaGFzZURhdGUiLCJ0cmFuc2FjdGlvblR5cGUiLCJmaWx0ZXIiLCJwYXJzZUVycm9yIiwiZXJyb3IiLCJzdGF0dXMiLCJFcnJvciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/openai.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/formdata-node","vendor-chunks/openai","vendor-chunks/form-data-encoder","vendor-chunks/node-fetch","vendor-chunks/agentkeepalive","vendor-chunks/web-streams-polyfill","vendor-chunks/ms","vendor-chunks/humanize-ms","vendor-chunks/event-target-shim","vendor-chunks/abort-controller"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fupload%2Froute&page=%2Fapi%2Fupload%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fupload%2Froute.ts&appDir=%2FUsers%2Fquando%2FDocuments%2FData%20parsing%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fquando%2FDocuments%2FData%20parsing&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();